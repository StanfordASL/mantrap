
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <title>Controller &#8212; mantrap 0.1 documentation</title>
    <link rel="stylesheet" href="_static/pyramid.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Evaluation" href="evaluation.html" />
    <link rel="prev" title="Filter Modules" href="filter.html" />
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Neuton&amp;subset=latin" type="text/css" media="screen" charset="utf-8" />
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Nobile:regular,italic,bold,bolditalic&amp;subset=latin" type="text/css" media="screen" charset="utf-8" />
<!--[if lte IE 6]>
<link rel="stylesheet" href="_static/ie6.css" type="text/css" media="screen" charset="utf-8" />
<![endif]-->

  </head><body>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="evaluation.html" title="Evaluation"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="filter.html" title="Filter Modules"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">mantrap 0.1 documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="controller">
<h1>Controller<a class="headerlink" href="#controller" title="Permalink to this headline">¶</a></h1>
<div class="section" id="module-mantrap.controller.p_ahead">
<span id="pi-control"></span><h2>PI Control<a class="headerlink" href="#module-mantrap.controller.p_ahead" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt id="mantrap.controller.p_ahead.p_ahead_controller">
<code class="sig-prename descclassname">mantrap.controller.p_ahead.</code><code class="sig-name descname">p_ahead_controller</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">agent</span><span class="p">:</span> <span class="n"><a class="reference internal" href="agents.html#mantrap.agents.agent.Agent" title="mantrap.agents.agent.Agent">mantrap.agents.agent.Agent</a></span></em>, <em class="sig-param"><span class="n">path</span><span class="p">:</span> <span class="n">torch.Tensor</span></em>, <em class="sig-param"><span class="n">max_sim_time</span><span class="p">:</span> <span class="n">float</span></em>, <em class="sig-param"><span class="n">dtc</span><span class="p">:</span> <span class="n">float</span></em>, <em class="sig-param"><span class="n">speed_reference</span><span class="p">:</span> <span class="n">float</span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">breaking_acc</span><span class="p">:</span> <span class="n">float</span> <span class="o">=</span> <span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mantrap.controller.p_ahead.p_ahead_controller" title="Permalink to this definition">¶</a></dt>
<dd><p>Look-ahead based P-Controller inspired by pure pursuit controller implemented in PythonRobotics library.</p>
<p>This controller separates the optimization of “steering” and acceleration input and iteratively determines the
control input to stay on the given path by alternating between calculating u (control) and simulating the
agent’s behaviour given that input. Therefore in every step first the nearest point, which is the point on
the given path which is closest to the state of the agent, and the target point, the point it should steer
to are computed. Given these points, the current agent’s state and a reference speed profile along the path
(constant speed, linearly breaking at the end) some control input is determined which maneuvers the agent to
the target point.</p>
<p>The algorithm is similar to the pure pursuit algorithm but using generalized dynamics. Due to high amount of
repetitions, the small degree of dimensionality (assuming 2D) and since no gradient is required, the scalar
implementation using native python types only is preferred. Compared to a PyTorch based implementation
(167 ms ± 16.7 ms) it is way more efficient (5.17 ms ± 65.6 µs).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>agent</strong> – agent to control (including its state and dynamics).</p></li>
<li><p><strong>path</strong> – path positions to track (N, 2).</p></li>
<li><p><strong>max_sim_time</strong> – maximal time to forward simulate with dtc simulation time-steps [s].</p></li>
<li><p><strong>dtc</strong> – control simulation time-steps (output controls will be discretized using dtc).</p></li>
<li><p><strong>speed_reference</strong> – reference speed (constant phase of speed profile), max agent’s speed per default [m/s].</p></li>
<li><p><strong>breaking_acc</strong> – maximal acceleration during breaking, max agent’s acceleration per default [m/s^2].</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Controller</a><ul>
<li><a class="reference internal" href="#module-mantrap.controller.p_ahead">PI Control</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="filter.html"
                        title="previous chapter">Filter Modules</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="evaluation.html"
                        title="next chapter">Evaluation</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/controllers.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="evaluation.html" title="Evaluation"
             >next</a> |</li>
        <li class="right" >
          <a href="filter.html" title="Filter Modules"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">mantrap 0.1 documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2020, Simon Schaefer.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 3.0.3.
    </div>
  </body>
</html>